(function(s,y){typeof exports=="object"&&typeof module!="undefined"?module.exports=y(require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["react","react-dom"],y):(s=typeof globalThis!="undefined"?globalThis:s||self,s.LicenseKeyboard=y(s.React,s.ReactDOM))})(this,function(s,y){"use strict";function F(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function R(e){if(e&&e.__esModule)return e;var t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});return e&&Object.keys(e).forEach(function(l){if(l!=="default"){var c=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(t,l,c.get?c:{enumerable:!0,get:function(){return e[l]}})}}),t.default=e,Object.freeze(t)}var K=F(s),h=R(s),S={exports:{}},k={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M=K.default,$=Symbol.for("react.element"),A=Symbol.for("react.fragment"),q=Object.prototype.hasOwnProperty,U=M.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,V={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,l){var c,i={},d=null,E=null;l!==void 0&&(d=""+l),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(E=t.ref);for(c in t)q.call(t,c)&&!V.hasOwnProperty(c)&&(i[c]=t[c]);if(e&&e.defaultProps)for(c in t=e.defaultProps,t)i[c]===void 0&&(i[c]=t[c]);return{$$typeof:$,type:e,key:d,ref:E,props:i,_owner:U.current}}k.Fragment=A,k.jsx=_,k.jsxs=_,S.exports=k;const a=S.exports.jsx,O=S.exports.jsxs,I={province:"province-cell",character:"character-cell",normal:"normal-cell"},u=h.memo(e=>{const t=l=>{l.preventDefault(),!e.disabled&&typeof e.onClick=="function"&&e.onClick(e.cell)};return a("section",{className:`keyboard-cell ${I[e.type]} ${e.disabled?"cell-disabled":""}`,"aria-disabled":e.disabled,"aria-label":e.cell,role:"button",onTouchEnd:t,children:a("span",{style:e.cellTextStyle,className:"cell-text",children:e.cell})})});var le="";const J=[["\u4EAC","\u6CAA","\u7CA4","\u6D25","\u5180","\u664B","\u8499","\u8FBD"],["\u5409","\u9ED1","\u82CF","\u6D59","\u7696","\u95FD","\u8D63","\u9C81"],["\u8C6B","\u9102","\u6E58","\u6842","\u743C","\u6E1D","\u5DDD","\u8D35"],["\u4E91","\u85CF","\u9655","\u7518","\u9752","\u5B81","\u65B0","\u4F7F"]],b=[["1","2","3","4","5","6","7","8","9","0"],["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["Z","X","C","V","B","N","M"],["\u6E2F","\u6FB3","\u5B66","\u8B66","\u9886"]],W="0123456789",w="ABCDEFGHJK",Y=new RegExp(`[${w}]`),T=window.requestAnimationFrame,x=window.document,G=e=>Math.pow(--e,5)+1,H=e=>X(e)?w:Q(e)?W:!1,Q=e=>Y.test(e[2])&&/^[0-9]+$/.test(e.slice(4,7)),X=e=>/^[0-9]+$/.test(e.slice(2,7)),g=e=>/[ABCDEFGHJKLMNPQRSTUVWXYZ]/.test(e),C=e=>/[0-9]/.test(e),B=e=>/[港澳学警领]/.test(e),v=(e,t)=>typeof t=="string"?t.indexOf(e)!==-1:t===1?g(e)||C(e):t===2?g(e):t===3?C(e):t===4?g(e)||C(e)||B(e):!0;return h.memo(e=>{const[t,l]=h.useState({keyboardOffsetProgress:0});h.useEffect(()=>(e.visible?p():ee(),()=>{z()}),[e.visible]);const c=h.useRef(null);let i=0,d=0,E=0;const P=()=>{d=performance.now(),E=300},Z=()=>{c.current=x.querySelector("#vehiclePlateKeyboard")||x.createElement("div"),c.current.id="vehiclePlateKeyboard",x.body.appendChild(c.current),c.current.addEventListener("touchstart",L),c.current.addEventListener("touchmove",j)},z=()=>{const r=c.current;r&&(r.removeEventListener("touchstart",L),r.removeEventListener("touchmove",j))},p=()=>{Z(),P(),T(N)},ee=()=>{P(),T(r=>N(r,"DOWN"))},N=(r,n="UP")=>{i=r-d;const m=Math.min(G(i/E),1);l(D=>({...D,keyboardOffsetProgress:n==="UP"?m:1-m})),m<1&&T(D=>N(D,n))},L=()=>{},j=r=>{r.preventDefault()},te=()=>{e.done()},f=r=>e.value.length<8&&e.onChange&&e.onChange(e.value+r),ne=()=>e.value.length>0&&e.onChange&&e.onChange(e.value.slice(0,-1)),re=()=>a("article",{className:"keyboard-container",children:J.map((r,n)=>a("section",{className:"keyboard-row",children:r.map(m=>a(u,{cellTextStyle:e.cellTextStyle,cell:m,onClick:f,type:"province"},m))},n))}),o=(r=1)=>O("article",{className:"keyboard-container",children:[a("section",{className:"keyboard-row",children:b[0].map(n=>a(u,{cellTextStyle:e.cellTextStyle,cell:n,onClick:f,disabled:!v(n,r),type:"normal"},n))}),a("section",{className:"keyboard-row",children:b[1].map(n=>a(u,{cellTextStyle:e.cellTextStyle,cell:n,onClick:f,disabled:!v(n,r),type:"normal"},n))}),a("section",{className:"keyboard-row",children:b[2].map(n=>a(u,{cellTextStyle:e.cellTextStyle,cell:n,onClick:f,disabled:!v(n,r),type:"normal"},n))}),a("section",{className:"keyboard-row",children:b[3].map(n=>a(u,{cellTextStyle:e.cellTextStyle,cell:n,onClick:f,disabled:!v(n,r),type:"normal"},n))}),a("section",{className:"keyboard-row",children:b[4].map(n=>a(u,{cellTextStyle:e.cellTextStyle,cell:n,onClick:f,disabled:!v(n,r),type:"character"},n)).concat(ce())})]}),ce=()=>a("section",{className:"keyboard-cell back-btn",onClick:ne,children:a("span",{className:"back-btn-svg",children:"\u232B"})},"backBtn"),ae=()=>{switch(e.value.length){case 0:return re();case 1:return o(2);case 2:return o();case 3:return o();case 4:return o();case 5:return o();case 6:return o(4);case 7:const r=H(e.value);return B(e.value.slice(-1))||r===!1?o(0):o(r);default:return o(0)}};return c.current?y.createPortal(O("section",{style:{transform:`translateY(calc(${1-t.keyboardOffsetProgress} * 100%))`},className:"vehicle-plate-keyboard-container",children:[a("section",{className:"confirm",onClick:te,children:a("p",{style:e.confirmButtonStyle,children:e.confirmButtonText||"\u786E\u8BA4"})}),a("section",{className:"keyboard",children:ae()})]}),c.current):null})});
